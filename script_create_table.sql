-- Database generated with pgModeler (PostgreSQL Database Modeler).
-- pgModeler  version: 0.9.2-beta2
-- PostgreSQL version: 12.0
-- Project Site: pgmodeler.io
-- Model Author: ---


-- Database creation must be done outside a multicommand file.
-- These commands were put in this file only as a convenience.
-- -- object: "REALIZA" | type: DATABASE --
-- -- DROP DATABASE IF EXISTS "REALIZA";
-- CREATE DATABASE "REALIZA"
-- 	CONNECTION LIMIT = 1;
-- -- ddl-end --
-- 

-- object: public."RESTAURANTE" | type: TABLE --
-- DROP TABLE IF EXISTS public."RESTAURANTE" CASCADE;
CREATE TABLE public."RESTAURANTE" (
	"NOME_FANTASIA" varchar(200) NOT NULL,
	"RAZAO_SOCIAL" varchar(200) NOT NULL,
	"TELEFONE" varchar(9) NOT NULL,
	"ID_RESTAURANTE" integer NOT NULL,
	"CNPJ" varchar(14) NOT NULL,
	"ID_ENDERECO" smallint NOT NULL,
	"RAIO_DE_ENTREGA" smallint NOT NULL,
	"ID_TIPOS_DE_COMIDA_TIPOS_DE_COMIDA" integer,
	CONSTRAINT "RESTAURANTE_pk" PRIMARY KEY ("ID_RESTAURANTE"),
	CONSTRAINT "ID_ENDERECO_UNIQUE" UNIQUE ("ID_ENDERECO")

);
-- ddl-end --
ALTER TABLE public."RESTAURANTE" OWNER TO postgres;
-- ddl-end --

-- object: public."CLIENTE" | type: TABLE --
-- DROP TABLE IF EXISTS public."CLIENTE" CASCADE;
CREATE TABLE public."CLIENTE" (
	"ID_CLIENTE" integer NOT NULL,
	"NOME" varchar(100) NOT NULL,
	"CPF" varchar(11),
	"RG" int4 NOT NULL,
	"EMAIL" "char",
	"TELEFONE" smallint,
	"ID_ENDERECO_ENDERECO" integer,
	CONSTRAINT "CLIENTE_pk" PRIMARY KEY ("ID_CLIENTE")

);
-- ddl-end --
ALTER TABLE public."CLIENTE" OWNER TO postgres;
-- ddl-end --

-- object: public."PRATOS" | type: TABLE --
-- DROP TABLE IF EXISTS public."PRATOS" CASCADE;
CREATE TABLE public."PRATOS" (
	"ID_PRATO" integer NOT NULL,
	"NOME" varchar(100),
	"PRECO" smallint NOT NULL GENERATED ALWAYS AS IDENTITY ,
	"DESCRICAO" text NOT NULL,
	"DISPONIBILIDADE" boolean NOT NULL,
	"TEMPO_PREPARO" smallint,
	CONSTRAINT "PRATOS_pk" PRIMARY KEY ("ID_PRATO")

);
-- ddl-end --
ALTER TABLE public."PRATOS" OWNER TO postgres;
-- ddl-end --

-- object: public."PEDIDO" | type: TABLE --
-- DROP TABLE IF EXISTS public."PEDIDO" CASCADE;
CREATE TABLE public."PEDIDO" (
	"ID_PEDIDO" integer NOT NULL,
	"VALOR_ENTREGA" money,
	"TEMPO_ENTREGA" time,
	"VALOR" integer NOT NULL,
	"HORA" time NOT NULL,
	"DATA" date NOT NULL,
	"PRATOS_ID" integer NOT NULL,
	"ID_PAGAMENTO_PAGAMENTO" integer,
	CONSTRAINT "PEDIDO_pk" PRIMARY KEY ("ID_PEDIDO")

);
-- ddl-end --
ALTER TABLE public."PEDIDO" OWNER TO postgres;
-- ddl-end --

-- object: public."ENTREGADOR" | type: TABLE --
-- DROP TABLE IF EXISTS public."ENTREGADOR" CASCADE;
CREATE TABLE public."ENTREGADOR" (
	"ID_ENTREGADOR" integer NOT NULL,
	"NOME" varchar(100) NOT NULL,
	"CPF" char(11) NOT NULL,
	"VEICULO" varchar(20) NOT NULL,
	"PLACA" char(7) NOT NULL,
	"TELEFONE" varchar(9) NOT NULL,
	"ID_ENDERECO_ENDERECO" integer,
	CONSTRAINT "ENTREGADOR_pk" PRIMARY KEY ("ID_ENTREGADOR")

);
-- ddl-end --
ALTER TABLE public."ENTREGADOR" OWNER TO postgres;
-- ddl-end --

-- object: public."PAGAMENTO" | type: TABLE --
-- DROP TABLE IF EXISTS public."PAGAMENTO" CASCADE;
CREATE TABLE public."PAGAMENTO" (
	"ID_PAGAMENTO" integer NOT NULL,
	"TIPO" varchar(10),
	"VALOR_PAGO" money,
	"TROCO" money NOT NULL,
	CONSTRAINT "PAGAMENTO_pk" PRIMARY KEY ("ID_PAGAMENTO")

);
-- ddl-end --
ALTER TABLE public."PAGAMENTO" OWNER TO postgres;
-- ddl-end --

-- object: public."TIPOS_DE_COMIDA" | type: TABLE --
-- DROP TABLE IF EXISTS public."TIPOS_DE_COMIDA" CASCADE;
CREATE TABLE public."TIPOS_DE_COMIDA" (
	"ID_TIPOS_DE_COMIDA" integer NOT NULL,
	"DESCRICAO" varchar(30),
	CONSTRAINT "ID_TIPOS_DE_COMIDA_UNIQUE" UNIQUE ("ID_TIPOS_DE_COMIDA"),
	CONSTRAINT "TIPOS_DE_COMIDA_pk" PRIMARY KEY ("ID_TIPOS_DE_COMIDA")

);
-- ddl-end --
ALTER TABLE public."TIPOS_DE_COMIDA" OWNER TO postgres;
-- ddl-end --

-- object: public."ENDERECO" | type: TABLE --
-- DROP TABLE IF EXISTS public."ENDERECO" CASCADE;
CREATE TABLE public."ENDERECO" (
	"ID_ENDERECO" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT BY 1 START WITH 1 ),
	"ENDERECO" varchar(30) NOT NULL,
	"CIDADE_ID" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT BY 1 START WITH 1 ),
	"CEP" varchar(8) NOT NULL,
	"LATITUDE" decimal(8) NOT NULL,
	"LONGITUDE" decimal(8) NOT NULL,
	CONSTRAINT "ENDERECO_pk" PRIMARY KEY ("ID_ENDERECO"),
	CONSTRAINT "ID_ENDERECO" UNIQUE ("ID_ENDERECO")

);
-- ddl-end --
ALTER TABLE public."ENDERECO" OWNER TO postgres;
-- ddl-end --

-- object: public."CIDADE" | type: TABLE --
-- DROP TABLE IF EXISTS public."CIDADE" CASCADE;
CREATE TABLE public."CIDADE" (
	"ID_CIDADE" integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT BY 1 START WITH 1 ),
	"CIDADE" varchar(20),
	"UF_ID" integer NOT NULL,
	CONSTRAINT "CIDADE_pk" PRIMARY KEY ("ID_CIDADE")

);
-- ddl-end --
ALTER TABLE public."CIDADE" OWNER TO postgres;
-- ddl-end --

-- object: public."UF" | type: TABLE --
-- DROP TABLE IF EXISTS public."UF" CASCADE;
CREATE TABLE public."UF" (
	"UF" varchar(20),
	"ID_UF" integer NOT NULL,
	CONSTRAINT "UF_pk" PRIMARY KEY ("ID_UF")

);
-- ddl-end --
ALTER TABLE public."UF" OWNER TO postgres;
-- ddl-end --

-- object: public."many_CIDADE_has_many_UF" | type: TABLE --
-- DROP TABLE IF EXISTS public."many_CIDADE_has_many_UF" CASCADE;
CREATE TABLE public."many_CIDADE_has_many_UF" (
	"ID_CIDADE_CIDADE" integer NOT NULL,
	"ID_UF_UF" integer NOT NULL,
	CONSTRAINT "many_CIDADE_has_many_UF_pk" PRIMARY KEY ("ID_CIDADE_CIDADE","ID_UF_UF")

);
-- ddl-end --

-- object: "CIDADE_fk" | type: CONSTRAINT --
-- ALTER TABLE public."many_CIDADE_has_many_UF" DROP CONSTRAINT IF EXISTS "CIDADE_fk" CASCADE;
ALTER TABLE public."many_CIDADE_has_many_UF" ADD CONSTRAINT "CIDADE_fk" FOREIGN KEY ("ID_CIDADE_CIDADE")
REFERENCES public."CIDADE" ("ID_CIDADE") MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: "UF_fk" | type: CONSTRAINT --
-- ALTER TABLE public."many_CIDADE_has_many_UF" DROP CONSTRAINT IF EXISTS "UF_fk" CASCADE;
ALTER TABLE public."many_CIDADE_has_many_UF" ADD CONSTRAINT "UF_fk" FOREIGN KEY ("ID_UF_UF")
REFERENCES public."UF" ("ID_UF") MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: public."many_ENDERECO_has_many_CIDADE" | type: TABLE --
-- DROP TABLE IF EXISTS public."many_ENDERECO_has_many_CIDADE" CASCADE;
CREATE TABLE public."many_ENDERECO_has_many_CIDADE" (
	"ID_ENDERECO_ENDERECO" integer NOT NULL,
	"ID_CIDADE_CIDADE" integer NOT NULL,
	CONSTRAINT "many_ENDERECO_has_many_CIDADE_pk" PRIMARY KEY ("ID_ENDERECO_ENDERECO","ID_CIDADE_CIDADE")

);
-- ddl-end --

-- object: "ENDERECO_fk" | type: CONSTRAINT --
-- ALTER TABLE public."many_ENDERECO_has_many_CIDADE" DROP CONSTRAINT IF EXISTS "ENDERECO_fk" CASCADE;
ALTER TABLE public."many_ENDERECO_has_many_CIDADE" ADD CONSTRAINT "ENDERECO_fk" FOREIGN KEY ("ID_ENDERECO_ENDERECO")
REFERENCES public."ENDERECO" ("ID_ENDERECO") MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: "CIDADE_fk" | type: CONSTRAINT --
-- ALTER TABLE public."many_ENDERECO_has_many_CIDADE" DROP CONSTRAINT IF EXISTS "CIDADE_fk" CASCADE;
ALTER TABLE public."many_ENDERECO_has_many_CIDADE" ADD CONSTRAINT "CIDADE_fk" FOREIGN KEY ("ID_CIDADE_CIDADE")
REFERENCES public."CIDADE" ("ID_CIDADE") MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: "ENDERECO_fk" | type: CONSTRAINT --
-- ALTER TABLE public."CLIENTE" DROP CONSTRAINT IF EXISTS "ENDERECO_fk" CASCADE;
ALTER TABLE public."CLIENTE" ADD CONSTRAINT "ENDERECO_fk" FOREIGN KEY ("ID_ENDERECO_ENDERECO")
REFERENCES public."ENDERECO" ("ID_ENDERECO") MATCH FULL
ON DELETE SET NULL ON UPDATE CASCADE;
-- ddl-end --

-- object: "CLIENTE_uq" | type: CONSTRAINT --
-- ALTER TABLE public."CLIENTE" DROP CONSTRAINT IF EXISTS "CLIENTE_uq" CASCADE;
ALTER TABLE public."CLIENTE" ADD CONSTRAINT "CLIENTE_uq" UNIQUE ("ID_ENDERECO_ENDERECO");
-- ddl-end --

-- object: public."many_PEDIDO_has_many_PRATOS" | type: TABLE --
-- DROP TABLE IF EXISTS public."many_PEDIDO_has_many_PRATOS" CASCADE;
CREATE TABLE public."many_PEDIDO_has_many_PRATOS" (
	"ID_PEDIDO_PEDIDO" integer NOT NULL,
	"ID_PRATO_PRATOS" integer NOT NULL,
	CONSTRAINT "many_PEDIDO_has_many_PRATOS_pk" PRIMARY KEY ("ID_PEDIDO_PEDIDO","ID_PRATO_PRATOS")

);
-- ddl-end --

-- object: "PEDIDO_fk" | type: CONSTRAINT --
-- ALTER TABLE public."many_PEDIDO_has_many_PRATOS" DROP CONSTRAINT IF EXISTS "PEDIDO_fk" CASCADE;
ALTER TABLE public."many_PEDIDO_has_many_PRATOS" ADD CONSTRAINT "PEDIDO_fk" FOREIGN KEY ("ID_PEDIDO_PEDIDO")
REFERENCES public."PEDIDO" ("ID_PEDIDO") MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: "PRATOS_fk" | type: CONSTRAINT --
-- ALTER TABLE public."many_PEDIDO_has_many_PRATOS" DROP CONSTRAINT IF EXISTS "PRATOS_fk" CASCADE;
ALTER TABLE public."many_PEDIDO_has_many_PRATOS" ADD CONSTRAINT "PRATOS_fk" FOREIGN KEY ("ID_PRATO_PRATOS")
REFERENCES public."PRATOS" ("ID_PRATO") MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: "ENDERECO_fk" | type: CONSTRAINT --
-- ALTER TABLE public."ENTREGADOR" DROP CONSTRAINT IF EXISTS "ENDERECO_fk" CASCADE;
ALTER TABLE public."ENTREGADOR" ADD CONSTRAINT "ENDERECO_fk" FOREIGN KEY ("ID_ENDERECO_ENDERECO")
REFERENCES public."ENDERECO" ("ID_ENDERECO") MATCH FULL
ON DELETE SET NULL ON UPDATE CASCADE;
-- ddl-end --

-- object: "ENTREGADOR_uq" | type: CONSTRAINT --
-- ALTER TABLE public."ENTREGADOR" DROP CONSTRAINT IF EXISTS "ENTREGADOR_uq" CASCADE;
ALTER TABLE public."ENTREGADOR" ADD CONSTRAINT "ENTREGADOR_uq" UNIQUE ("ID_ENDERECO_ENDERECO");
-- ddl-end --

-- object: "TIPOS_DE_COMIDA_fk" | type: CONSTRAINT --
-- ALTER TABLE public."RESTAURANTE" DROP CONSTRAINT IF EXISTS "TIPOS_DE_COMIDA_fk" CASCADE;
ALTER TABLE public."RESTAURANTE" ADD CONSTRAINT "TIPOS_DE_COMIDA_fk" FOREIGN KEY ("ID_TIPOS_DE_COMIDA_TIPOS_DE_COMIDA")
REFERENCES public."TIPOS_DE_COMIDA" ("ID_TIPOS_DE_COMIDA") MATCH FULL
ON DELETE SET NULL ON UPDATE CASCADE;
-- ddl-end --

-- object: "RESTAURANTE_uq" | type: CONSTRAINT --
-- ALTER TABLE public."RESTAURANTE" DROP CONSTRAINT IF EXISTS "RESTAURANTE_uq" CASCADE;
ALTER TABLE public."RESTAURANTE" ADD CONSTRAINT "RESTAURANTE_uq" UNIQUE ("ID_TIPOS_DE_COMIDA_TIPOS_DE_COMIDA");
-- ddl-end --

-- object: "PAGAMENTO_fk" | type: CONSTRAINT --
-- ALTER TABLE public."PEDIDO" DROP CONSTRAINT IF EXISTS "PAGAMENTO_fk" CASCADE;
ALTER TABLE public."PEDIDO" ADD CONSTRAINT "PAGAMENTO_fk" FOREIGN KEY ("ID_PAGAMENTO_PAGAMENTO")
REFERENCES public."PAGAMENTO" ("ID_PAGAMENTO") MATCH FULL
ON DELETE SET NULL ON UPDATE CASCADE;
-- ddl-end --

-- object: "PEDIDO_uq" | type: CONSTRAINT --
-- ALTER TABLE public."PEDIDO" DROP CONSTRAINT IF EXISTS "PEDIDO_uq" CASCADE;
ALTER TABLE public."PEDIDO" ADD CONSTRAINT "PEDIDO_uq" UNIQUE ("ID_PAGAMENTO_PAGAMENTO");
-- ddl-end --

-- object: public."many_RESTAURANTE_has_many_PRATOS" | type: TABLE --
-- DROP TABLE IF EXISTS public."many_RESTAURANTE_has_many_PRATOS" CASCADE;
CREATE TABLE public."many_RESTAURANTE_has_many_PRATOS" (
	"ID_RESTAURANTE_RESTAURANTE" integer NOT NULL,
	"ID_PRATO_PRATOS" integer NOT NULL,
	CONSTRAINT "many_RESTAURANTE_has_many_PRATOS_pk" PRIMARY KEY ("ID_RESTAURANTE_RESTAURANTE","ID_PRATO_PRATOS")

);
-- ddl-end --

-- object: "RESTAURANTE_fk" | type: CONSTRAINT --
-- ALTER TABLE public."many_RESTAURANTE_has_many_PRATOS" DROP CONSTRAINT IF EXISTS "RESTAURANTE_fk" CASCADE;
ALTER TABLE public."many_RESTAURANTE_has_many_PRATOS" ADD CONSTRAINT "RESTAURANTE_fk" FOREIGN KEY ("ID_RESTAURANTE_RESTAURANTE")
REFERENCES public."RESTAURANTE" ("ID_RESTAURANTE") MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: "PRATOS_fk" | type: CONSTRAINT --
-- ALTER TABLE public."many_RESTAURANTE_has_many_PRATOS" DROP CONSTRAINT IF EXISTS "PRATOS_fk" CASCADE;
ALTER TABLE public."many_RESTAURANTE_has_many_PRATOS" ADD CONSTRAINT "PRATOS_fk" FOREIGN KEY ("ID_PRATO_PRATOS")
REFERENCES public."PRATOS" ("ID_PRATO") MATCH FULL
ON DELETE RESTRICT ON UPDATE CASCADE;
-- ddl-end --

-- object: "ID_ENDERECO" | type: CONSTRAINT --
-- ALTER TABLE public."RESTAURANTE" DROP CONSTRAINT IF EXISTS "ID_ENDERECO" CASCADE;
ALTER TABLE public."RESTAURANTE" ADD CONSTRAINT "ID_ENDERECO" FOREIGN KEY ("ID_ENDERECO")
REFERENCES public."ENDERECO" ("ID_ENDERECO") MATCH FULL
ON DELETE NO ACTION ON UPDATE NO ACTION;
-- ddl-end --


